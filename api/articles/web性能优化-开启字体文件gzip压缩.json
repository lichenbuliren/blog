{"title":"对字体文件开启GZIP压缩","uid":"08c70b89db876b721dc563156a9f4759","slug":"web性能优化-开启字体文件gzip压缩","date":"2015-11-18T03:21:35.000Z","updated":"2021-04-06T12:16:47.929Z","comments":true,"path":"api/articles/web性能优化-开启字体文件gzip压缩.json","cover":"https://heaven-blog-1255884785.file.myqcloud.com/poster-thumbnail.jpg","content":"<h2 id=\"字体类别\"><a href=\"#字体类别\" class=\"headerlink\" title=\"字体类别\"></a>字体类别</h2><h3 id=\"TrueType-ttf\"><a href=\"#TrueType-ttf\" class=\"headerlink\" title=\"TrueType (.ttf)\"></a>TrueType (.ttf)</h3><p>　　<code>Windows</code> 和 <code>Mac</code> 系统最常用的字体格式，其最大的特点就是它是由一种数学模式来进行定义的基于轮廓技术的字体，这使得它们比基于矢量的字体更容易处理，保证了屏幕与打印输出的一致性。同时，这类字体和矢量字体一样可以随意缩放、旋转而不必担心会出现锯齿。<br><span id=\"more\"></span></p>\n<h3 id=\"EOT-–-Embedded-Open-Type-eot\"><a href=\"#EOT-–-Embedded-Open-Type-eot\" class=\"headerlink\" title=\"EOT – Embedded Open Type (.eot)\"></a>EOT – Embedded Open Type (.eot)</h3><p>　　嵌入字体格式 <code>(EOT)</code> 是微软开发的一种技术，允许 <code>OpenType</code> 字体嵌入到网页并可以下载至浏览器渲染，浏览器根据 <code>CSS</code> 中 <code>@font-face</code> 的定义，下载，渲染这种 <code>.EOT</code> 后缀的字体文件。这些文件只在当前页活动的状态下，临时安装在用户的系统中。</p>\n<h3 id=\"OpenType-otf\"><a href=\"#OpenType-otf\" class=\"headerlink\" title=\"OpenType (.otf)\"></a>OpenType (.otf)</h3><p>　　<code>OpenType</code> 是一种可缩放字型 <code>(scalable font)</code> 电脑字体类型，采用 <code>PostScript</code> 格式，是美国微软公司与Adobe公司联合开发，用来替代 <code>TrueType</code> 字型的新字型。这类字体的文件扩展名为 <code>.otf</code>，类型代码是 <code>OTTO</code>，现行标准为 <code>OpenType 1.4</code>。<code>OpenType</code> 最初发表于1996年，并在2000年之后出现大量字体。它源于微软公司的 <code>TrueType Open</code> 字型，<code>TrueType Open</code> 字型又源于 <code>TrueType</code> 字型。<code>OpenType font</code> 包括了Adobe CID-Keyed font技术。Adobe公司已经在2002年末将其字体库全部改用OpenType格式。</p>\n<h3 id=\"WOFF-–-Web-Open-Font-Format-woff\"><a href=\"#WOFF-–-Web-Open-Font-Format-woff\" class=\"headerlink\" title=\"WOFF – Web Open Font Format (.woff)\"></a>WOFF – Web Open Font Format (.woff)</h3><p>　　相对于 TrueType 和 OpenType ，WOFF（Web开发字体格式）是一种专门为了 Web 而设计的字体格式标准，它并不复杂，实际上只是对于 TrueType / OpenType 等字体格式的封装，并针对网络使用加以优化：每个字体文件中含有字体以及针对字体的元数据（Metadata），字体文件被压缩，以便于网络传输，并且不包含任何加密或者 DRM 措施。包括 Adobe、 Lino Type、Monotype 在内的几乎所有主要的字体供应商都加入到支持 WOFF 的行列中来</p>\n<h3 id=\"SVG-Scalable-Vector-Graphics-Fonts-svg\"><a href=\"#SVG-Scalable-Vector-Graphics-Fonts-svg\" class=\"headerlink\" title=\"SVG (Scalable Vector Graphics) Fonts (.svg)\"></a>SVG (Scalable Vector Graphics) Fonts (.svg)</h3><p>　　顾名思义，就是使用 <code>SVG</code> 技术来呈现字体，还有一种 <code>gzip</code> 压缩格式的 <code>SVG</code> 字体 <code>.svgz</code> 。<code>SVG</code> 可缩放矢量图形<code>（Scalable Vector Graphics）</code> 是基于可扩展标记语言 <code>(XML)</code>，用于描述二维矢量图形的一种图形格式。<code>SVG</code> 由W3C制定，是一个开放标准。SVG严格遵从XML语法，并用文本格式的描述性语言来描述图像内容，因此是一种和图像分辨率无关的矢量图形格式。SVG可以使你设计的网页可以更加精彩细致，使用简单的文本命令，SVG可实现色彩线性变化、路径、自定义字体、透明效果、滤镜效果等各式常见的图形图像效果。</p>\n<h2 id=\"字体文件在服务器端开启gzip压缩\"><a href=\"#字体文件在服务器端开启gzip压缩\" class=\"headerlink\" title=\"字体文件在服务器端开启gzip压缩\"></a>字体文件在服务器端开启gzip压缩</h2><h3 id=\"什么是-GZIP-压缩\"><a href=\"#什么是-GZIP-压缩\" class=\"headerlink\" title=\"什么是 GZIP 压缩\"></a>什么是 <code>GZIP</code> 压缩</h3><p>GZIP网页压缩，是一种WEB服务器与浏览器之间共同遵守的协议，也就是说WEB服务器和浏览器都必须支持该技术才能实现GZIP压缩，而当下主流的浏览器都是支持GZIP压缩，包括IE6、IE7、IE8、IE9、FireFox、谷歌浏览器、Opera等，而常见的WEB服务器通常有Apache和IIS两种。</p>\n<p>GZIP最早由Jean-loup Gailly和Mark Adler创建，用于UNIX系统的文件压缩。我们在Linux中经常会用到后缀为.gz的文件，它们就是GZIP格式的。目前，GZIP已经成为Internet上使用非常普遍的一种数据压缩格式，或者说一种文件格式。</p>\n<p>GZIP压缩的比率往往在3倍到10倍。</p>\n<h4 id=\"浏览器对-font-face-Web-fonts-的支持情况\"><a href=\"#浏览器对-font-face-Web-fonts-的支持情况\" class=\"headerlink\" title=\"浏览器对 @font-face Web fonts 的支持情况:\"></a>浏览器对 <code>@font-face</code> Web fonts 的支持情况:</h4><p><img src=\"/images/font-support.png\" width=\"100%\"></p>\n<p><br><br></p>\n<h4 id=\"ttf-otf-浏览器支持情况\"><a href=\"#ttf-otf-浏览器支持情况\" class=\"headerlink\" title=\"ttf/otf 浏览器支持情况\"></a>ttf/otf 浏览器支持情况</h4><p><img src=\"/images/ttf-font.png\" width=\"100%\"></p>\n<p><br><br></p>\n<h4 id=\"woff-浏览器支持情况\"><a href=\"#woff-浏览器支持情况\" class=\"headerlink\" title=\"woff 浏览器支持情况\"></a>woff 浏览器支持情况</h4><p><img src=\"/images/woff-font.png\" width=\"100%\"></p>\n<p><br><br></p>\n<h4 id=\"svg-浏览器支持情况\"><a href=\"#svg-浏览器支持情况\" class=\"headerlink\" title=\"svg 浏览器支持情况\"></a>svg 浏览器支持情况</h4><p><img src=\"/images/svg-font.png\" width=\"100%\"></p>\n<p><br><br></p>\n<h4 id=\"eot-IE-特有支持\"><a href=\"#eot-IE-特有支持\" class=\"headerlink\" title=\"eot IE 特有支持\"></a>eot IE 特有支持</h4><p><img src=\"/images/eot-font.png\" width=\"100%\"></p>\n<p><strong>字体文件对应的 minetype </strong></p>\n<ul>\n<li>application/font-woff                 woff</li>\n<li>application/font-sfnt                 ttf</li>\n<li>application/vnd.ms-fontobj        ecteot</li>\n<li>image/svg+xml                                    svg svgz</li>\n</ul>\n<p>以 <a href=\"m.meizu.com\">m.meizu.com</a> 网站中 <code>KaiGenGothicCN-Light.woff</code> 字体文件为例</p>\n<p>开启前字体文件大小为 <code>311kb</code>，开启后 <code>223kb</code>，相比开启前压缩了 <code>30%</code> 左右，如下图</p>\n<p><img src=\"/images/font-compare.jpg\" width=\"100%\"></p>\n<h3 id=\"步骤一：登录远程服务器\"><a href=\"#步骤一：登录远程服务器\" class=\"headerlink\" title=\"步骤一：登录远程服务器\"></a>步骤一：登录远程服务器</h3><p><code>ssh 用户名@远程ip地址</code> 输入密码</p>\n<h3 id=\"步骤二：修改-nginx-配置文件-mime-types-文件\"><a href=\"#步骤二：修改-nginx-配置文件-mime-types-文件\" class=\"headerlink\" title=\"步骤二：修改 nginx 配置文件 mime.types 文件\"></a>步骤二：修改 nginx 配置文件 mime.types 文件</h3><p>打开配置文件，添加如下几个配置项:</p>\n<pre class=\"line-numbers language-nginx\" data-language=\"nginx\"><code class=\"language-nginx\">application<span class=\"token operator\">/</span>font<span class=\"token operator\">-</span>woff \twoff  \napplication<span class=\"token operator\">/</span>font<span class=\"token operator\">-</span>sfnt \tttf\napplication<span class=\"token operator\">/</span>vnd<span class=\"token punctuation\">.</span>ms<span class=\"token operator\">-</span>fontobject\t\teot\nimage<span class=\"token operator\">/</span>svg<span class=\"token operator\">+</span>xml\t\tsvg svgz<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"步骤三：修改-nginx-配置文件-nginx-conf-文件\"><a href=\"#步骤三：修改-nginx-配置文件-nginx-conf-文件\" class=\"headerlink\" title=\"步骤三：修改 nginx 配置文件 nginx.conf 文件\"></a>步骤三：修改 nginx 配置文件 nginx.conf 文件</h3><p>打开 <code>nginx.conf</code> 文件，添加如下配置项</p>\n<pre class=\"line-numbers language-nginx\" data-language=\"nginx\"><code class=\"language-nginx\"><span class=\"token keyword\">gzip_types</span>\t\ttext<span class=\"token operator\">/</span>plain application<span class=\"token operator\">/</span>x<span class=\"token operator\">-</span>javascript text<span class=\"token operator\">/</span>css application<span class=\"token operator\">/</span>xml application<span class=\"token operator\">/</span>font<span class=\"token operator\">-</span>woff application<span class=\"token operator\">/</span>vnd<span class=\"token punctuation\">.</span>ms<span class=\"token operator\">-</span>fontobject application<span class=\"token operator\">/</span>font<span class=\"token operator\">-</span>sfnt image<span class=\"token operator\">/</span>svg<span class=\"token operator\">+</span>xml<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>这里面新增的配置项就是刚刚在 <code>mime.types</code> 里面配置的键</p>\n<p><strong>修改了配置文件，需要重启nginx</strong><br><strong>重启 nginx：/data/nginx/sbin/nginx -s reload</strong></p>\n","feature":null,"text":"字体类别TrueType (.ttf) Windows 和 Mac 系统最常用的字体格式，其最大的特点就是它是由一种数学模式来进行定义的基于轮廓技术的字体，这使得它们比基于矢量的字体更容易处理，保证了屏幕与打印输出的一致性。同时，这类字体和矢量字体一样可以随意缩放、旋转而不必担心...","link":"","photos":[],"count_time":{"symbolsCount":"2.5k","symbolsTime":"2 mins."},"categories":[{"name":"font","slug":"font","count":1,"path":"api/categories/font.json"}],"tags":[{"name":"移动端","slug":"移动端","count":2,"path":"api/tags/移动端.json"},{"name":"性能优化","slug":"性能优化","count":2,"path":"api/tags/性能优化.json"},{"name":"font","slug":"font","count":1,"path":"api/tags/font.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AD%97%E4%BD%93%E7%B1%BB%E5%88%AB\"><span class=\"toc-text\">字体类别</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#TrueType-ttf\"><span class=\"toc-text\">TrueType (.ttf)</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#EOT-%E2%80%93-Embedded-Open-Type-eot\"><span class=\"toc-text\">EOT – Embedded Open Type (.eot)</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#OpenType-otf\"><span class=\"toc-text\">OpenType (.otf)</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#WOFF-%E2%80%93-Web-Open-Font-Format-woff\"><span class=\"toc-text\">WOFF – Web Open Font Format (.woff)</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#SVG-Scalable-Vector-Graphics-Fonts-svg\"><span class=\"toc-text\">SVG (Scalable Vector Graphics) Fonts (.svg)</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AD%97%E4%BD%93%E6%96%87%E4%BB%B6%E5%9C%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E5%BC%80%E5%90%AFgzip%E5%8E%8B%E7%BC%A9\"><span class=\"toc-text\">字体文件在服务器端开启gzip压缩</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BB%80%E4%B9%88%E6%98%AF-GZIP-%E5%8E%8B%E7%BC%A9\"><span class=\"toc-text\">什么是 GZIP 压缩</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AF%B9-font-face-Web-fonts-%E7%9A%84%E6%94%AF%E6%8C%81%E6%83%85%E5%86%B5\"><span class=\"toc-text\">浏览器对 @font-face Web fonts 的支持情况:</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#ttf-otf-%E6%B5%8F%E8%A7%88%E5%99%A8%E6%94%AF%E6%8C%81%E6%83%85%E5%86%B5\"><span class=\"toc-text\">ttf&#x2F;otf 浏览器支持情况</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#woff-%E6%B5%8F%E8%A7%88%E5%99%A8%E6%94%AF%E6%8C%81%E6%83%85%E5%86%B5\"><span class=\"toc-text\">woff 浏览器支持情况</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#svg-%E6%B5%8F%E8%A7%88%E5%99%A8%E6%94%AF%E6%8C%81%E6%83%85%E5%86%B5\"><span class=\"toc-text\">svg 浏览器支持情况</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#eot-IE-%E7%89%B9%E6%9C%89%E6%94%AF%E6%8C%81\"><span class=\"toc-text\">eot IE 特有支持</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%AD%A5%E9%AA%A4%E4%B8%80%EF%BC%9A%E7%99%BB%E5%BD%95%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8\"><span class=\"toc-text\">步骤一：登录远程服务器</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%AD%A5%E9%AA%A4%E4%BA%8C%EF%BC%9A%E4%BF%AE%E6%94%B9-nginx-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-mime-types-%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">步骤二：修改 nginx 配置文件 mime.types 文件</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%AD%A5%E9%AA%A4%E4%B8%89%EF%BC%9A%E4%BF%AE%E6%94%B9-nginx-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-nginx-conf-%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">步骤三：修改 nginx 配置文件 nginx.conf 文件</span></a></li></ol></li></ol>","author":{"name":"Heaven","avatar":"https://heaven-blog-1255884785.file.myqcloud.com/github-avatar.jpeg","link":""},"mapped":true,"prev_post":{"title":"Three.js 学习笔记01——介绍和使用 Three.js","uid":"d65f8ba1e4ddba43dcbec152507764fe","slug":"Threejs学习笔记","date":"2015-11-19T09:26:26.000Z","updated":"2021-04-06T12:16:35.717Z","comments":true,"path":"api/articles/Threejs学习笔记.json","cover":"https://heaven-blog-1255884785.file.myqcloud.com/poster-thumbnail.jpg","text":"WebGL 登场如今浏览器的功能越来越强大，而且这些功能可以通过 Javascript 直接调用。你可以用 HTML5 标签轻松的添加视频和音频，而且可以在 HTML5 画布上面创建各种交互组件。现在这个功能集合里又多了一个成员，即支持 WebGL。通过 WebGL，你可以直接使...","link":"","photos":[],"count_time":{"symbolsCount":720,"symbolsTime":"1 mins."},"categories":[{"name":"ThreeJS","slug":"ThreeJS","count":1,"path":"api/categories/ThreeJS.json"}],"tags":[{"name":"webgl","slug":"webgl","count":1,"path":"api/tags/webgl.json"},{"name":"javascript","slug":"javascript","count":4,"path":"api/tags/javascript.json"}],"author":{"name":"Heaven","avatar":"https://heaven-blog-1255884785.file.myqcloud.com/github-avatar.jpeg","link":""}},"next_post":{"title":"移动端样式常用技巧分享","uid":"ecad264aec1551451e17b7211a9096b4","slug":"移动端优化","date":"2015-11-18T03:21:35.000Z","updated":"2021-04-06T12:17:25.689Z","comments":true,"path":"api/articles/移动端优化.json","cover":"https://heaven-blog-1255884785.file.myqcloud.com/poster-thumbnail.jpg","text":"1、居中显示主要使用 css3 translate 属性，如 translate3d(-50%,-50%,0) 这里的百分比相对元素自身宽高来计算的，所以在不清楚自身DOM宽高的情况下，可以很方便的居中布局 &lt;div class=\"container\"> 这是容器 &lt;...","link":"","photos":[],"count_time":{"symbolsCount":"4.3k","symbolsTime":"4 mins."},"categories":[{"name":"css","slug":"css","count":1,"path":"api/categories/css.json"}],"tags":[{"name":"移动端","slug":"移动端","count":2,"path":"api/tags/移动端.json"},{"name":"性能优化","slug":"性能优化","count":2,"path":"api/tags/性能优化.json"},{"name":"css","slug":"css","count":1,"path":"api/tags/css.json"}],"author":{"name":"Heaven","avatar":"https://heaven-blog-1255884785.file.myqcloud.com/github-avatar.jpeg","link":""}}}