{"title":"挣脱牢笼之搭建 VPN","uid":"b3d6ae8006272f981c8e702e842c8273","slug":"挣脱牢笼之搭建远程 VPN","date":"2015-11-27T11:54:17.000Z","updated":"2021-04-06T12:17:07.694Z","comments":true,"path":"api/articles/挣脱牢笼之搭建远程 VPN.json","cover":"https://heaven-blog-1255884785.file.myqcloud.com/poster-thumbnail.jpg","content":"<p><img src=\"/images/title-bg.png\" width=\"100%\"></p>\n<p>为何会想到要翻个墙(为了被河蟹)，作为一个非著名、专业程序员，时常需要查找一下技术方面的资料；一般情况下可能会想到使用「百度」这个坑爹的搜索引擎去查资料。但是结果你会发现找的一堆的什么鬼东西，跟自己搜索的没有半毛钱关系。大多数是带有广告性质的博客或者纯粹的广告商排在最前面，恶心至极。<span id=\"more\"></span></p>\n<p>值得庆幸的是，不是所有的搜索引擎都和百度一样，那就是国外的「<a href=\"https://www.google.com\">Google</a>」搜索引擎；送给各位同行的程序员们 「珍爱生命，远离百度」。</p>\n<p>在 2010年3月23日，「Google」高级副总裁大卫·德拉蒙德公开发表声明，宣布将搜索服务由中国内地转至香港。至此，我们就犹如笼中之鸟一样，失去了与外界直接交流。所以想要使用 「Google」搜索服务只能通过其他办法了，也就是我们常说 「fangqiang」。</p>\n<h2 id=\"搭建服务器-——-购买国外-VPS\"><a href=\"#搭建服务器-——-购买国外-VPS\" class=\"headerlink\" title=\"搭建服务器 —— 购买国外 VPS\"></a>搭建服务器 —— 购买国外 VPS</h2><p>VPS：虚拟服务器,虚拟专用服务器(Virtual Private Server),虚拟专属主机。</p>\n<p>这里不要问我哪个 VPS 服务商最好，好不好要自己试过了才知道，这里我就以我自己使用的国外 VPS <a href=\"https://www.vultr.com/\">Vultr</a> 为例。</p>\n<h3 id=\"注册-Vultr\"><a href=\"#注册-Vultr\" class=\"headerlink\" title=\"注册 Vultr\"></a>注册 <strong>Vultr</strong></h3><p><img src=\"/images/regedit.png\" width=\"100%\"> </p>\n<p>上图忘记提的一个就是 <strong>Security Code</strong> 也就是所谓的安全码，是我们信用卡背面的写在最后的那个三位数。</p>\n<p>这里的信用卡只要你的信用卡上面有 <strong>VISA</strong>字样的就能够使用。我自己用的招行的信用卡，可以很方便的使用扣款，有一点就是，在你设置了信用卡之后，以后的付款行为都不需要再输入密码了，听起来有点不安全的感觉。。。</p>\n<p>如果你有优惠码的话，可以在 <strong>Redeem Gift Codes Coupons</strong>那里填写，就能折扣购买了。</p>\n<p>上面的基本信息填写完毕之后，接下来就是挑选我们自己所需要的服务器配置了。不多说，上图</p>\n<p><img src=\"/images/hardware.png\" width=\"100%\"></p>\n<p>选完上图的配置之后，其他的就可以不用再勾选了，找到底部的确认按钮提交就可以了。</p>\n<p>提交之后，会进入到 <strong>My Server</strong> 界面，会列出刚刚选择的服务器基本信息。点击最右边的 <strong>manage</strong> 进入详细信息界面，看图：</p>\n<p><img src=\"/images/machine.png\" width=\"100%\"><br><img src=\"/images/manage.png\" width=\"100%\"></p>\n<p>好了，购买服务器的流程到这里就差不多结束了。接下是如何在服务器上面搭建我们自己能用的VPN了。</p>\n<h3 id=\"远程登录服务器\"><a href=\"#远程登录服务器\" class=\"headerlink\" title=\"远程登录服务器\"></a>远程登录服务器</h3><p>由于作者用的是 Mac 这里就不介绍 window 下面的方法了，因为命令都是一样的。</p>\n<p>这里我们使用 Github 上知名的软件 <a href=\"https://github.com/lichenbuliren/shadowsocks/tree/2.8.2\">shadowsocks</a>；</p>\n<p>打开我们的命令行工具 <strong>item</strong></p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">ssh</span> <span class=\"token function\">ssh</span> root@45.32.22.xxx<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>然后输入密码，登录到我们的服务器上。登录服务器第一件事情就是修改 VPS 提供给我们的默认 ssh 密码</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">passwd</span> root<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>修改完毕之后，退出远程登录（使用 <code>exit</code> 命令）。重新登录我们远程服务器</p>\n<h3 id=\"安装-shadowsocks-服务\"><a href=\"#安装-shadowsocks-服务\" class=\"headerlink\" title=\"安装 shadowsocks 服务\"></a>安装 shadowsocks 服务</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">// CentOS:\nyum <span class=\"token function\">install</span> python-setuptools <span class=\"token operator\">&amp;&amp;</span> easy_install pip\npip <span class=\"token function\">install</span> shadowsocks<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>安装成功之后，启动我们的 shadowsocks</p>\n<p><strong>正常启动</strong></p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">ssserver -p <span class=\"token number\">443</span> -k password -m aes-256-cfb<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><strong>后台启动</strong></p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> ssserver -p <span class=\"token number\">443</span> -k password -m aes-256-cfb --user nobody -d start<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>其中「443」可以任意替换成自己设置的端口，「password」替换成自己设置的密码，「aes-256-cfb」可选的加密方式，默认这个就好。</p>\n<p><strong>停止服务</strong><br><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> ssserver -d stop<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre></p>\n<p><strong>查看 log</strong><br><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">less</span> /var/log/shadowsocks.log<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre></p>\n<h3 id=\"开启防火墙端口\"><a href=\"#开启防火墙端口\" class=\"headerlink\" title=\"开启防火墙端口\"></a>开启防火墙端口</h3><p>上面我们假设对外开启了「443」端口，这个时候是还不能访问的，因为防火墙没有将它加入防火墙允许的名单里面。下面开启防火墙的端口</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">iptables -I INPUT -p tcp --dport <span class=\"token number\">8388</span> -j ACCEPT<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>添加完毕之后，执行<br><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">service</span> iptables status<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre></p>\n<p>查看刚刚添加的端口是否在列表里面，如果在的话，表明添加成功，成功之后，我们保存下，然后重启防火墙<br><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">service</span> iptables save\n<span class=\"token function\">service</span> iptables restart<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre></p>\n<h3 id=\"最后\"><a href=\"#最后\" class=\"headerlink\" title=\"最后\"></a>最后</h3><p>至此，服务端的 shadowsocks 已经配置完毕，下篇文章我们将继续如何在自己的电脑上通过 shadowsocks 程序连接上远程的 VPN 服务，从而实现「翻墙」能力。下篇再会！</p>\n","feature":null,"text":" 为何会想到要翻个墙(为了被河蟹)，作为一个非著名、专业程序员，时常需要查找一下技术方面的资料；一般情况下可能会想到使用「百度」这个坑爹的搜索引擎去查资料。但是结果你会发现找的一堆的什么鬼东西，跟自己搜索的没有半毛钱关系。大多数是带有广告性质的博客或者纯粹的广告商排在最前面，恶心...","link":"","photos":[],"count_time":{"symbolsCount":"1.9k","symbolsTime":"2 mins."},"categories":[{"name":"服务器","slug":"服务器","count":2,"path":"api/categories/服务器.json"}],"tags":[{"name":"VPS","slug":"VPS","count":2,"path":"api/tags/VPS.json"},{"name":"VPN","slug":"VPN","count":2,"path":"api/tags/VPN.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%90%AD%E5%BB%BA%E6%9C%8D%E5%8A%A1%E5%99%A8-%E2%80%94%E2%80%94-%E8%B4%AD%E4%B9%B0%E5%9B%BD%E5%A4%96-VPS\"><span class=\"toc-text\">搭建服务器 —— 购买国外 VPS</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%B3%A8%E5%86%8C-Vultr\"><span class=\"toc-text\">注册 Vultr</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95%E6%9C%8D%E5%8A%A1%E5%99%A8\"><span class=\"toc-text\">远程登录服务器</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85-shadowsocks-%E6%9C%8D%E5%8A%A1\"><span class=\"toc-text\">安装 shadowsocks 服务</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%BC%80%E5%90%AF%E9%98%B2%E7%81%AB%E5%A2%99%E7%AB%AF%E5%8F%A3\"><span class=\"toc-text\">开启防火墙端口</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9C%80%E5%90%8E\"><span class=\"toc-text\">最后</span></a></li></ol></li></ol>","author":{"name":"Heaven","avatar":"https://heaven-blog-1255884785.file.myqcloud.com/github-avatar.jpeg","link":""},"mapped":true,"prev_post":{"title":"Shadowsocks 本地配置","uid":"21f2ce60f85aede628890e1a613f1280","slug":"Shadowsocks-本地配置","date":"2015-12-01T11:37:34.000Z","updated":"2021-04-06T12:16:28.063Z","comments":true,"path":"api/articles/Shadowsocks-本地配置.json","cover":"https://heaven-blog-1255884785.file.myqcloud.com/poster-thumbnail.jpg","text":"接上一篇「挣脱牢笼之搭建 VPN」，我们已经购买了虚拟服务器，并且在上面开启了 「Shadowsocks」服务。 本地「Shadowsocks」配置打开我们已经安装的 「Shadowsocks」软件，点击小飞机图标，选择 Servers-&gt;Open Server Prefe...","link":"","photos":[],"count_time":{"symbolsCount":681,"symbolsTime":"1 mins."},"categories":[{"name":"服务器","slug":"服务器","count":2,"path":"api/categories/服务器.json"}],"tags":[{"name":"VPS","slug":"VPS","count":2,"path":"api/tags/VPS.json"},{"name":"VPN","slug":"VPN","count":2,"path":"api/tags/VPN.json"}],"author":{"name":"Heaven","avatar":"https://heaven-blog-1255884785.file.myqcloud.com/github-avatar.jpeg","link":""}},"next_post":{"title":"CreateJS 学习笔记——初识 CreateJS","uid":"ddc43c1e80443c2e3992bb0e0f73537e","slug":"CreateJS学习笔记01","date":"2015-11-25T11:33:37.000Z","updated":"2021-04-06T12:16:03.544Z","comments":true,"path":"api/articles/CreateJS学习笔记01.json","cover":"https://heaven-blog-1255884785.file.myqcloud.com/poster-thumbnail.jpg","text":"1、什么是 CreateJS ?CreateJS 是一套可以构建丰富交互体验的 HTML5 游戏的开源工具包，旨在降低 HTML5 项目的开发难度和成本，让开发者以熟悉的方式打造更具现代感的网络交互体验。 官方地址：www.createjs.com;Github: https:/...","link":"","photos":[],"count_time":{"symbolsCount":490,"symbolsTime":"1 mins."},"categories":[{"name":"CreateJS","slug":"CreateJS","count":1,"path":"api/categories/CreateJS.json"}],"tags":[{"name":"html5 game engine","slug":"html5-game-engine","count":1,"path":"api/tags/html5-game-engine.json"},{"name":"study","slug":"study","count":3,"path":"api/tags/study.json"},{"name":"js","slug":"js","count":2,"path":"api/tags/js.json"}],"author":{"name":"Heaven","avatar":"https://heaven-blog-1255884785.file.myqcloud.com/github-avatar.jpeg","link":""}}}